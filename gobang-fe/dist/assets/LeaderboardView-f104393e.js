import{_ as b,c as f,a as d,b as o,t,n as y,i as _,o as k,m as x,d as a,f as p,l as u,e as w,F as z,p as V,g as $,q as g}from"./index-358441f2.js";const C={__name:"UserAvatar",props:{username:{type:String,required:!0},size:{type:Number,default:40}},setup(h){const e=h,i=f(()=>e.username.charAt(0).toUpperCase()),r=s=>{let l=0;for(let v=0;v<s.length;v++)l=s.charCodeAt(v)+((l<<5)-l);return`hsl(${l%360}, 70%, 50%)`},n=f(()=>({width:`${e.size}px`,height:`${e.size}px`,backgroundColor:r(e.username),fontSize:`${e.size*.5}px`,lineHeight:`${e.size}px`}));return(s,l)=>(d(),o("div",{class:"user-avatar",style:y(n.value)},t(i.value),5))}},m=b(C,[["__scopeId","data-v-f5942af0"]]);const N={class:"leaderboard-container"},S={key:0,class:"loading-container"},A={key:1,class:"error-message"},F={key:2,class:"leaderboard-content"},L={class:"leaderboard-card"},U={key:0,class:"top-players"},B={key:0,class:"player-podium second-place"},q={class:"podium-avatar"},I={class:"podium-info"},D={class:"podium-name"},E={class:"podium-rating"},H={key:1,class:"player-podium first-place"},M={class:"podium-avatar"},R={class:"podium-info"},T={class:"podium-name"},j={class:"podium-rating"},G={key:2,class:"player-podium third-place"},J={class:"podium-avatar"},K={class:"podium-info"},O={class:"podium-name"},P={class:"podium-rating"},Q={class:"table-container"},W={class:"leaderboard-table"},X={class:"rank-cell"},Y={class:"name-cell"},Z={class:"rating-cell"},aa={class:"win-rate-cell"},sa={class:"progress-container"},ea={class:"progress-text"},ta={key:1,class:"empty-state"},la={__name:"LeaderboardView",setup(h){const e=_([]),i=_(!0),r=_(null);return k(async()=>{try{i.value=!0;const n=await x.get("/api/leaderboard");e.value=n.data||[],i.value=!1}catch(n){console.error("Failed to fetch leaderboard:",n),r.value="无法加载排行榜数据，请稍后再试",i.value=!1}}),(n,s)=>(d(),o("div",N,[s[11]||(s[11]=a("div",{class:"leaderboard-header"},[a("h1",{class:"leaderboard-title"},"积分排行榜"),a("p",{class:"leaderboard-subtitle"},"查看棋手们的积分和战绩表现")],-1)),i.value?(d(),o("div",S,s[0]||(s[0]=[a("div",{class:"spinner"},null,-1),a("p",null,"正在加载排行榜数据...",-1)]))):r.value?(d(),o("div",A,[s[1]||(s[1]=a("i",{class:"fas fa-exclamation-circle"},null,-1)),a("p",null,t(r.value),1)])):(d(),o("div",F,[a("div",L,[e.value.length>0?(d(),o("div",U,[e.value.length>1?(d(),o("div",B,[a("div",q,[p(m,{username:e.value[1].username,size:70},null,8,["username"]),s[2]||(s[2]=a("div",{class:"medal"},[a("i",{class:"fas fa-medal"})],-1))]),a("div",I,[s[3]||(s[3]=a("div",{class:"podium-rank"},"2",-1)),a("div",D,t(e.value[1].username),1),a("div",E,t(e.value[1].rating)+" 分",1)])])):u("",!0),e.value.length>0?(d(),o("div",H,[a("div",M,[p(m,{username:e.value[0].username,size:90},null,8,["username"]),s[4]||(s[4]=a("div",{class:"medal"},[a("i",{class:"fas fa-crown"})],-1))]),a("div",R,[s[5]||(s[5]=a("div",{class:"podium-rank"},"1",-1)),a("div",T,t(e.value[0].username),1),a("div",j,t(e.value[0].rating)+" 分",1)])])):u("",!0),e.value.length>2?(d(),o("div",G,[a("div",J,[p(m,{username:e.value[2].username,size:70},null,8,["username"]),s[6]||(s[6]=a("div",{class:"medal"},[a("i",{class:"fas fa-medal"})],-1))]),a("div",K,[s[7]||(s[7]=a("div",{class:"podium-rank"},"3",-1)),a("div",O,t(e.value[2].username),1),a("div",P,t(e.value[2].rating)+" 分",1)])])):u("",!0)])):u("",!0),a("div",Q,[a("table",W,[s[8]||(s[8]=a("thead",null,[a("tr",null,[a("th",null,"排名"),a("th",null,"用户名"),a("th",{class:"active-sort"},[w(" 积分 "),a("i",{class:"fas fa-sort-down"})]),a("th",null,"胜场"),a("th",null,"总场次"),a("th",null,"胜率")])],-1)),a("tbody",null,[(d(!0),o(z,null,V(e.value,(l,c)=>(d(),o("tr",{key:l.id,class:g({highlighted:c<3})},[a("td",X,[a("span",{class:g(["rank-badge",`rank-${c+1}`])},t(c+1),3)]),a("td",Y,t(l.username),1),a("td",Z,t(l.rating),1),a("td",null,t(l.games_won),1),a("td",null,t(l.total_games),1),a("td",aa,[a("div",sa,[a("div",{class:"progress-bar",style:y({width:`${l.win_rate}%`})},null,4),a("span",ea,t(l.win_rate.toFixed(2))+"%",1)])])],2))),128))])])]),e.value.length===0?(d(),o("div",ta,s[9]||(s[9]=[a("i",{class:"fas fa-trophy"},null,-1),a("p",null,"暂无排行榜数据",-1),a("p",{class:"empty-subtitle"},"快来开始你的第一场比赛吧！",-1)]))):u("",!0)]),s[10]||(s[10]=$('<div class="leaderboard-info" data-v-a92d1455><div class="info-card" data-v-a92d1455><div class="info-header" data-v-a92d1455><i class="fas fa-info-circle" data-v-a92d1455></i><h3 data-v-a92d1455>排行榜说明</h3></div><div class="info-content" data-v-a92d1455><p data-v-a92d1455>排行榜根据玩家积分排名，积分由对战结果决定：</p><ul data-v-a92d1455><li data-v-a92d1455>初始积分：1000分</li><li data-v-a92d1455>胜利：+10分</li><li data-v-a92d1455>失败：-10分</li></ul><p data-v-a92d1455>积极参与对战，提升你的排名吧！</p></div></div></div>',1))]))]))}},oa=b(la,[["__scopeId","data-v-a92d1455"]]);export{oa as default};
