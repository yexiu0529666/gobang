import{_ as C,h as k,u as R,i as l,r as q,a as g,b as _,d as s,j as N,k as v,v as c,t as y,l as S,e as f,f as U,w as h}from"./index-358441f2.js";const B={class:"register-container"},D={class:"register-card"},I={class:"form-group"},M={class:"input-group"},T={class:"form-group"},j={class:"input-group"},A={class:"form-group"},E={class:"input-group"},$={class:"form-group"},z={class:"input-group"},F=["disabled"],G=["disabled"],H={key:0,class:"spinner-border spinner-border-sm me-2"},J={class:"text-center mt-4"},K={class:"mb-0"},L={__name:"RegisterView",setup(O){const w=k(),b=R(),u=l(""),r=l(""),d=l(""),p=l(""),n=l(!1),m=l(!1),i=l(0),x=async()=>{if(!r.value){alert("请输入邮箱");return}m.value=!0;try{await b.sendVerificationCode(r.value),i.value=60;const t=setInterval(()=>{i.value--,i.value<=0&&clearInterval(t)},1e3)}catch(t){alert(t.message||"发送验证码失败")}finally{m.value=!1}},V=async()=>{var t,e;if(!u.value||!r.value||!d.value||!p.value){alert("请填写所有字段");return}n.value=!0;try{const o={username:u.value,email:r.value,password:d.value,verificationCode:p.value};console.log("注册数据:",o),await b.register(o),w.push("/login")}catch(o){alert(((e=(t=o.response)==null?void 0:t.data)==null?void 0:e.error)||o.message||"注册失败")}finally{n.value=!1}};return(t,e)=>{const o=q("router-link");return g(),_("div",B,[s("div",D,[e[14]||(e[14]=s("h1",{class:"text-center mb-4"},"注册",-1)),s("form",{onSubmit:N(V,["prevent"]),class:"register-form"},[s("div",I,[e[5]||(e[5]=s("label",{for:"username"},"用户名",-1)),s("div",M,[e[4]||(e[4]=s("span",{class:"input-group-text"},[s("i",{class:"bi bi-person"})],-1)),v(s("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),class:"form-control",placeholder:"请输入用户名",required:""},null,512),[[c,u.value]])])]),s("div",T,[e[7]||(e[7]=s("label",{for:"email"},"邮箱",-1)),s("div",j,[e[6]||(e[6]=s("span",{class:"input-group-text"},[s("i",{class:"bi bi-envelope"})],-1)),v(s("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=a=>r.value=a),class:"form-control",placeholder:"请输入邮箱",required:""},null,512),[[c,r.value]])])]),s("div",A,[e[9]||(e[9]=s("label",{for:"password"},"密码",-1)),s("div",E,[e[8]||(e[8]=s("span",{class:"input-group-text"},[s("i",{class:"bi bi-lock"})],-1)),v(s("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=a=>d.value=a),class:"form-control",placeholder:"请输入密码",required:""},null,512),[[c,d.value]])])]),s("div",$,[e[11]||(e[11]=s("label",{for:"verificationCode"},"验证码",-1)),s("div",z,[e[10]||(e[10]=s("span",{class:"input-group-text"},[s("i",{class:"bi bi-shield-check"})],-1)),v(s("input",{type:"text",id:"verificationCode","onUpdate:modelValue":e[3]||(e[3]=a=>p.value=a),class:"form-control",placeholder:"请输入验证码",required:""},null,512),[[c,p.value]]),s("button",{type:"button",class:"btn btn-outline-primary",onClick:x,disabled:m.value||i.value>0},y(i.value>0?`${i.value}s后重试`:"获取验证码"),9,F)])]),s("button",{type:"submit",class:"btn btn-primary w-100",disabled:n.value},[n.value?(g(),_("span",H)):S("",!0),f(" "+y(n.value?"注册中...":"注册"),1)],8,G)],32),s("div",J,[s("p",K,[e[13]||(e[13]=f("已有账号？")),U(o,{to:"/login",class:"text-primary"},{default:h(()=>e[12]||(e[12]=[f("立即登录")])),_:1})])])])])}}},Q=C(L,[["__scopeId","data-v-94fa858b"]]);export{Q as default};
